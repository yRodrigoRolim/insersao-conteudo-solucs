<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Esteiras</title>
    <style>
        :root{
    --color-primary: #FF5319;
    --color-secundary: #3D315B;
    --color-green: #A2D729;
    --color-red: #BB0A21;
}
    </style>
</head>
<body>
    <aside>
        <div>
            <h1>Solucs</h1>
            <p>Inserção de contéudo</p>
            <div class="orange-line"></div>
            <nav>
                <ul>
                    <li><a href="index.php">Home</a></li>
                    <li><input type="color" id="colorPicker"></li>
                </ul>
            </nav>
        </div>
    </aside> 

    <main>
        <div style="width: 900px; max-width: none;">
            <div>
                <h1>Inserção de conteúdo</h1>
                <p>Faça a sua Inserção de contéudo</p>
                <div class="orange-line" style="max-width: 40%; margin: 10px 0px;"></div>
                <h3>Inserção de conteúdo</h3>    
            </div>
            <div>
                <form>
                    <label for="texto_da_textarea">Cole o seu texto e identifique as listas com !list</label><br>
                    <div class="orange-line" style="max-width: 60%; margin: 10px 0px;"></div>
                    <input type="text" name="strong" id="strong" placeholder="Palavras para negrito, separadas por vírgula">
                    <label for="strong">Coloque as palavras para deixar em negrito, separadas por vírgula!</label>
                    <div style="display: flex; margin-top: 20px;">
                        <textarea id="texto_da_textarea" name="texto_da_textarea" rows="12" required style="width: 100%; margin-right: 20px;"></textarea>
                    </div>
                    <div class="button-container">
                        <button type="button" onclick="criartexto()">Criar o conteúdo</button>
                        <button id="botaoCopiar">Clipboard</button>
                    </div>
                </form>
            </div>
            <div class="margin-top erros-retornos" id="conteudoParaCopiar"></div>
        </div>
    </main>

    <script>
        function criartexto() {
            const texto = document.getElementById('texto_da_textarea').value;
            const linhas = texto.split("\n");
            let html = '';
            let emLista = false;
            const palavrasNegrito = document.getElementById('strong').value.split(',').map(palavra => palavra.trim());
            
            linhas.forEach(linha => {
                linha = linha.trim();
                if (linha === '!list') {
                    if (emLista) {
                        html += '</ul>';
                        emLista = false;
                    } else {
                        html += '<ul>';
                        emLista = true;
                    }
                } else if (emLista) {
                    if (linha.length > 1) {
                        html += '<li>' + linha + '</li>';
                    }
                } else {
                    if (linha.length < 70 && linha.length > 2) {
                        html += '<h2>' + linha + '</h2>';
                    } else if (linha.length > 70) {
                        let linhaModificada = linha;
                        palavrasNegrito.forEach(palavra => {
                            linhaModificada = linhaModificada.replace(new RegExp(palavra, 'g'), `<strong>${palavra}</strong>`);
                        });
                        html += '<p>' + linhaModificada + '</p>';
                    }
                }
            });

            if (emLista) {
                html += '</ul>';
            }
            const contentDiv = document.getElementById('conteudoParaCopiar');
            contentDiv.textContent = html; // Alterado para innerHTML para renderizar o HTML
        }
    </script>

    <script>
        document.getElementById('botaoCopiar').addEventListener('click', function() {
            var conteudo = document.getElementById('conteudoParaCopiar').innerText;
            var areaTexto = document.createElement('textarea');
            areaTexto.value = conteudo;
            document.body.appendChild(areaTexto);
            areaTexto.select();
            document.execCommand('Copy');
            document.body.removeChild(areaTexto);
            alert('Conteúdo copiado para o clipboard!');
        });
    </script>

    <script>
        // Seleciona o input color
const colorPicker = document.getElementById('colorPicker');

// Adiciona um ouvinte de eventos para quando o valor do input muda
colorPicker.addEventListener('input', function() {
    // Atualiza a variável CSS --color-primary com o valor selecionado
    document.documentElement.style.setProperty('--color-primary', colorPicker.value);
});

    </script>
</body>
</html>
